//** SCREEN STYLES **//

// Imports --------------------------------------------------------------

@import partials/defaults
// comment out to turn of debugging
//@import partials/debug

//--------------------------------
// Media
//--------------------------------

@media all and (orientation:portrait)
  // Style adjustments for portrait mode goes here


@media all and (orientation:landscape)
  // Style adjustments for landscape mode goes here


@media screen and (max-device-width: 480px)
  // Pass in false if you don't want iOS and WinMobile to mobile-optimize the text for you
  +media-mobile(true)

/* Styles --------------------------------------------------------------

$content-cols: 8
$comments-cols: 4
$default-border-radius: 0.2em
$icon-size: 32px
$thumb-size: 64px

body
  +susy

#header
  +full($total-cols)
  +height(2)
  position: relative
  z-index: 100

#title
  +columns(4, $total-cols)
  +adjust-font-size-to(32px)
  margin: 0
  // HACK: align to bottom of nav (and shift in a gutter width)
  position: relative
  bottom: -0.2em
  left: 16px

#nav
  +columns($content-cols, $total-cols)
  +omega($total-cols)
  +leader
  ul
    #user
      width: auto
      float: right
      text-align: right
      margin-right: $gutter-width
      .control-link
        margin-left: $gutter-width

#secondary-nav
  +full($content-cols)
  +leader

#nav, #secondary-nav
  ul
    +horizontal_list(1em)
    li
      width: $col-width
      text-align: center
      padding-right: 0
      &.wide
        text-align: left
        width: $col-width * 2

#main
  +full
  #flash
    // FIXME: evil hack to get flash the right size
    width: 97%
    position: absolute
    z-index: 90
    div
      +border-radius($default-border-radius)
      padding-left: $gutter-width
      padding-right: $gutter-width
    p
      text-align: center
      margin: 0
  #content
    +full($total-cols)
    //z-index: 10
    .full
      +columns($total-cols, $total-cols)
      +trailer
  #content.with-comments
    +columns($content-cols, $total-cols)
    .full
      +columns($content-cols, $content-cols)
  #wall
    +columns($comments-cols, $total-cols)
    +omega($total-cols)
    .notices
      +height(2)

#footer
  +full


//.Devise /////////////////////////////////////////////////////

#login, #signup
  +columns(5,12)
  +prepend(3,12)
  +rhythm-borders
  +leader
  +trailer(2)

.registrations #content, .passwords #main
  & > *
    +columns(6, $total_cols)
  i
    +adjust-font-size-to(12px)
// Comments ///////////////////////////////////////////////////

.comments label
  position: relative
  bottom: -0.4em
  left: 3px

.input_prompt
  margin-bottom: 0

.new_comment
  +full(4)
  .controls
    +full(4)
    +trailer
    text-align: right
  input
    +adjust-font-size-to(12px)
    +box-sizing(border-box)

.comment, summary
  +full(4)
  +trailing-border(1px, 0)
  p
    +full(4)
    +trailer(0)
    padding-left: $gutter-width
  .info
    +full(4)
    +horizontal_list(4px * $px2em)
    +adjust-font-size-to(12px)
    //+omega(4)
    .user
      font-weight: bold
    .date
      font-style: italic
    .edit, .delete
      float: right
    .edit
      margin-right: 8px * $px2em

// Images controller //////////////////////////////////////////

.images, .users
  h2.date
    +full($content-cols)
    margin: 0
  .image
    +full($content-cols)
    & > div
      +full($content-cols)
    & > details
      +full($content-cols)
      +trailer

  .image.icon, .image.thumb
    & > a
      +columns(1, $content-cols)
    & > details
      +columns(7, $content-cols)
      +omega($content-cols)
      clear: none

.image details a[data-method=delete]
  float: right

.image.icon img
  width: $icon-size * $px2em
  height: $icon-size * $px2em
.image.thumb img
  max-width: $thumb-size * $px2em
  max-height: $thumb-size * $px2em
  display: block
  margin-left: auto
  margin-right: auto

.container
  position: relative
  z-index: 1

.week
  +full($content-cols)
  position: relative
  z-index: auto
  .label
    display: block
    +adjust-font-size-to(30px)
    position: absolute
    top: -0.85em
    left: -$gutter-width * ($base-font-size / 30px)
    // underneath .image-list
    z-index: -1


// handle week view differntly in different locations
body.home .week
  opacity: 0.6
  &:hover
    opacity: 1

body.home .weeklist 
  +leader
  .week
    margin-top: ($base-line-height/2)*$px2em
    top: 0
    opacity: 1

.image-list
  +full($content-cols)
  +height(3)
  +horizontal-list($gutter-width / 2)
  overflow: visible
  //position: relative
  //z-index: 20
  
  li
    // override horizontal-list white-space: no-wrap
    white-space: inherit
    //position: relative
    //z-index: 21
  & > .image
    margin-top: 0.3em
    a
      vertical-align: middle
  div.image.thumb
    width: $thumb-size * $px2em
    height: $thumb-size * $px2em
  .image.absent
    display: block
    width: ($thumb-size - 2px) * $px2em
    height: ($thumb-size - 2px) * $px2em
    border: 1px solid $border-color
    text-align: center
    font-weight: bold
    +adjust-font-size-to(16px)
    a
      display: none
      padding-top: 5px * $px2em
      width: 100%
      height: ($thumb-size - 7px) * $px2em

.user .image-list .image.absent
  @extend .control
  a
    display: block

// week (details/summary pop-ups)
.pop-up
  position: absolute
  margin-left: -20000px
  z-index: 50
  min-width: 12em
  max-width: 23em
  padding: (($base-line-height / 2) - 1px) * $px2em
  border: 1px solid
  +border-radius(1em)
  +box-shadow
  textarea
    min-width: 23em

  
.image.thumb:hover > .pop-up
  margin-left: 0

.pop-up:hover
  margin-left: -30px

// Home controller ///////////////////////////////////////////

.notices
  text-align: center
  a
    +adjust-font-size-to($base-font-size, 2)
    padding: 0.3em 1em

// admin (NOTE: no comments)
#content .users
  +full($total-cols)
  ul
    +full($total-cols)
    +height(1.5)
    li
      +columns(2, $total-cols)
      text-align: center
      a.control-link
        display: block
        width: 80%
        height: 80%
        margin-top: 10%
      &.short
        +columns(1, $total-cols)
      &.long
        +columns(3, $total-cols)
      &:last
        +omega($total-cols)

  .create_user
    border: 1px solid $border-color
    background-color: $border-color


// Other modules --------------------------------------------------
$image-height: 18
@import partials/gallery

#gallery
  .description
    +full($content-cols)
    +trailer(0.5)
    +leader(0.5)
  .comments
    +full($content-cols)
    +trailer
    +heights(false, 5)

.paginate
  +full($content-cols)


