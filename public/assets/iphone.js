var Picup={customURLScheme:"fileupload://",windowname:"fileupload",activeFileInput:null,currentHash:"",hashObserverId:null,callbackHandler:null,openFileWithId:function(a){window.open(Picup.urlForOptions("view",{picID:a}),Picup.windowname);return false},convertFileInput:function(a,c){var b=a;if(typeof(a)=="string"){b=document.getElementById(a)}b.type="button";b.value="Choose Photo...";b.picupOptions=c;b.onclick=function(){Picup.activeFileInput=this;window.open(Picup.urlForOptions("new",this.picupOptions),Picup.windowname);if(Picup.callbackHandler){Picup.currentHash=window.location.hash;Picup.hashObserverId=setInterval("Picup.checkHash()",500)}};b.disabled=false;return false},checkHash:function(){if(window.location.hash!=Picup.currentHash){clearInterval(Picup.hashObserverId);Picup.currentHash=window.location.hash;var f=window.location.hash.replace(/^\#/,"");var g=f.split("&");var a={};var e=[];for(var d=0;d<g.length;d++){var b=g[d];var c=b.replace("=","&").split("&");a[c[0]]=c[1]}Picup.callbackHandler(a)}},urlForOptions:function(d,b){var a=Picup.customURLScheme+d+"?";var f=[];for(var e in b){f.push(e+"="+b[e])}var c=a+f.join("&");return c},};